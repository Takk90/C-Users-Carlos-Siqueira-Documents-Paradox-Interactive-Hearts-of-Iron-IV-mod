scripted_gui = {
	# Hides Topbar Money Container
	hide_money = {
		context_type = player_context

		window_name = "hide_money_button"

		visible = {
			ROOT = { NOT = { has_country_flag = hide_money } }
		}

		effects = {
			hide_money_bg_click = {
				ROOT = { set_country_flag = hide_money }
			}
		}
	}
	# Shows Topbar Money Container
	show_money = {
		context_type = player_context

		window_name = "show_money_button"

		visible = {
			ROOT = { has_country_flag = hide_money }
		}

		effects = {
			show_money_bg_click = {
				ROOT = { clr_country_flag = hide_money }
			}
		}
	}

	# Topbar Containers
	# Debt Container within the topbar
	debt = {
		context_type = player_context

		window_name = "debt_container"

		visible = {
			ROOT = { NOT = { has_country_flag = hide_money } }
		}

		effects = {
			#Take debt
			debt_bg_click = {
				add_to_variable = { treasury = 1 }
				add_to_variable = { debt = 1.01 }
				ingame_update_setup = yes
				log = "[GetDateText]: [Root.GetName]: 1k debt taken ([?debt]k, intrest: [?interest_rate]% balance:[?treasury_rate]k)"
			}
			debt_bg_control_click = {
				add_to_variable = { treasury = 10 }
				add_to_variable = { debt = 10.1 }
				ingame_update_setup = yes
				log = "[GetDateText]: [Root.GetName]: 10k debt taken ([?debt]k, intrest: [?interest_rate]% balance:[?treasury_rate]k)"
			}
			debt_bg_shift_click = {
				add_to_variable = { treasury = 100 }
				add_to_variable = { debt = 101 }
				ingame_update_setup = yes
				log = "[GetDateText]: [Root.GetName]: 100k debt taken ([?debt]k, intrest: [?interest_rate]% balance:[?treasury_rate]k)"
			}

		  	#Repay debt
			debt_bg_right_click = {
				if = {
					limit = { check_variable = { treasury > 1 } }
					subtract_from_variable = { treasury = 1 }
					subtract_from_variable = { debt = 1 }
					ingame_update_setup = yes
					log = "[GetDateText]: [Root.GetName]: 1k debt repayed ([?debt]k, intrest: [?interest_rate]% balance:[?treasury_rate]k)"
				}
			}
			debt_bg_control_right_click = {
				if = {
					limit = { check_variable = { treasury > 10 } }
					subtract_from_variable = { treasury = 10 }
					subtract_from_variable = { debt = 10 }
					ingame_update_setup = yes
					log = "[GetDateText]: [Root.GetName]: 10k debt repayed ([?debt]k, intrest: [?interest_rate]% balance:[?treasury_rate]k)"
				}
			}
			debt_bg_shift_right_click = {
				if = {
					limit = { check_variable = { treasury > 100 } }
					subtract_from_variable = { treasury = 100 }
					subtract_from_variable = { debt = 100 }
					ingame_update_setup = yes
					log = "[GetDateText]: [Root.GetName]: 100k debt repayed ([?debt]k, intrest: [?interest_rate]% balance:[?treasury_rate]k)"
				}
			}
			#Pay off all debt
			debt_bg_alt_right_click = {
				if = {
					limit = { check_variable = { treasury > debt } }
					subtract_from_variable = { treasury = debt }
					subtract_from_variable = { debt = debt }
					ingame_update_setup = yes
				}
			}
		}
		triggers = {
			debt_bg_right_click_enabled = {
				check_variable = { treasury > 1 }
				check_variable = { debt > 1 }
			}
			debt_bg_control_right_click_enabled = {
				check_variable = { treasury > 10 }
				check_variable = { debt > 10 }
			}
			debt_bg_shift_right_click_enabled = {
				check_variable = { treasury > 100 }
				check_variable = { debt > 100 }
			}
			debt_bg_alt_right_click_enabled = {
				check_variable = { treasury > debt }
				NOT = { has_idea = bankrupcy }
			}

			debt_bg_click_enabled = {
				NOT = { has_idea = bankrupcy }
				# check_variable = { interest_rate < 25 }
			}
			debt_bg_control_click_enabled = {
				NOT = { has_idea = bankrupcy }
				# check_variable = { interest_rate < 25 }
			}
			debt_bg_shift_click_enabled = {
				NOT = { has_idea = bankrupcy }
				# check_variable = { interest_rate < 25 }
			}
		}

		# AI Section
		# ai_enabled enables the AI for this GUI
		ai_enabled = { always = yes }
		# ai_test_interval is the time in hours that is used to test the ai_check
		ai_test_interval = 72
		ai_check = {
			# Generic Conditions for debt
			OR = {
				has_available_treasury = yes
				ai_need_debt = yes
			}
			# Avoid Amassing Massive Debt During Depression/Recession/Bankruptcy/General Told Debt needs to stop
			NOT = {
				has_idea = depression
				has_idea = recession
				has_idea = bankrupcy
				has_country_flag = AI_stop_taking_debt
			}
		}
		ai_max_weight_taken_per_test = 3 # Allow the AI to select up to 3 if necessary

		ai_weights = {
			# Add Debt
			# The AI will not use "Take 1 Debt" they should avoid taking minimal debt if they need it
			debt_bg_shift_click = { #Adds debt -- 100 billion
				ai_will_do = {
					factor = 0.25
					modifier = { # Generic Loan conditions
						factor = 1.5
						AND = {
							check_variable = { interest_rate < 8.000 } # After 8% it becomes more problematic
							check_variable = { treasury_rate < 5.00 }
							check_variable = { treasury < 50 }
						}
					}
					modifier = { # Multiplicative section for factory quantity
						factor = 1.45
						num_of_factories > 49
					}
					modifier = {
						factor = 1.80
						num_of_factories > 75
					}
					modifier = {
						factor = 2.0
						num_of_factories > 125
					}
					# USA/CHI/SOV get special clauses to take on additional debt.
					# New superpowers and great_powers should kick in if necessary
					modifier = {
						factor = 25
						OR = {
							tag = USA
							tag = SOV
							tag = CHI
							has_idea = superpower
							has_idea = great_power
						}
					}
					# Heavily increase likelihood if massive in debt
					# Check MD_AI_Economic_Triggers.txt for full breakdown of Treasury Values
					modifier = {
						factor = 25
						ai_has_low_treasury = yes
					}
					# If at war take on more debt if needed
					modifier = {
						factor = 1.20
						has_war = yes
					}
					# GDP Debt Ratio Methodology
					# Start being less likely to take debt
					modifier = {
						factor = 0.90
						check_variable = { debt_ratio > 1.49 }
					}
					modifier = {
						factor = 0.75
						check_variable = { debt_ratio > 1.74 }
					}
					modifier = {
						factor = 0.60
						check_variable = { debt_ratio > 1.99 }
					}
					modifier = {
						factor = 0.40
						check_variable = { debt_ratio > 2.49 }
					}
					modifier = {
						factor = 0.25
						check_variable = { debt_ratio > 2.74 }
					}
					modifier = {
						factor = 0.01
						check_variable = { debt_ratio > 2.99 }
					}

					# Debt Taking Killswitch
					# The AI should not take on additional debt in these cases.
					# Only the Automatic Debt Taking Should Occur if this check runs true
					modifier = {
						factor = 0
						OR = {
							check_variable = { interest_rate > 11.999 } #12% interest is the AI soft cap
							has_idea = bankrupcy #Obviously can't take debt
							check_variable = { treasury < -50.000 }
							num_of_factories < 50
							has_country_flag = AI_economic_downspiral
							check_variable = { treasury_rate > 20.00 }
							is_subject = yes
							ai_has_high_treasury = yes
						}
					}
				}
			}
			debt_bg_control_click = { #Adds debt -- 10billion
				ai_will_do = {
					factor = 0.25
					modifier = { # Generic Loan conditions
						factor = 1.5
						AND = {
							check_variable = { interest_rate < 8.000 } # After 8% it becomes more problematic
							check_variable = { treasury_rate < 5.00 }
							check_variable = { treasury < 50 }
						}
					}
					modifier = { # Multiplicative section for factory quantity
						factor = 1.5
						num_of_factories > 14
					}
					modifier = {
						factor = 1.75
						num_of_factories > 25
					}
					# Regional Powers and Major Powers Should Take on 10 if needed
					modifier = {
						factor = 1.10
						OR = {
							tag = SOV
							tag = FRA
							tag = GER
							tag = ENG
							tag = ITA
							tag = CAN
							tag = MEX
							tag = SPR

							has_idea = regional_power
							has_idea = large_power
						}
					}
					# Don't take 10 Debt if the AI is CHI/USA
					modifier = {
						factor = 0.05
						OR = {
							tag = USA
							tag = CHI
						}
					}
					# If war take on more debt if needed
					modifier = {
						factor = 1.20
						has_war = yes
					}
					# Heavily increase likelihood if massive in debt
					# Check MD_AI_Economic_Triggers.txt for full breakdown of Treasury Values
					modifier = {
						factor = 25
						ai_has_low_treasury = yes
					}
					# GDP Debt Ratio Methodology
					# Start being less likely to take debt
					modifier = {
						factor = 0.90
						check_variable = { debt_ratio > 1.49 }
					}
					modifier = {
						factor = 0.75
						check_variable = { debt_ratio > 1.74 }
					}
					modifier = {
						factor = 0.60
						check_variable = { debt_ratio > 1.99 }
					}
					modifier = {
						factor = 0.40
						check_variable = { debt_ratio > 2.49 }
					}
					modifier = {
						factor = 0.25
						check_variable = { debt_ratio > 2.74 }
					}
					modifier = {
						factor = 0.01
						check_variable = { debt_ratio > 2.99 }
					}

					# Debt Killswitch
					# The AI should not take on additional debt in these cases.
					# Only the Automatic Debt Taking Should Occur if this check runs true
					modifier = {
						factor = 0
						OR = {
							check_variable = { interest_rate > 11.999 }
							has_idea = bankrupcy
							check_variable = { treasury < -30.00 }
							num_of_factories < 15
							has_country_flag = AI_economic_downspiral
							check_variable = { treasury_rate > 5.00 }
							is_subject = yes
							ai_has_high_treasury = yes
						}
					}
				}
			}
			# ------- #
			# Repaying Debt AI
			# This section primarily deals with the AI decreasing debt
			debt_bg_right_click = { # Repay Debt -- 1 Billion
				ai_will_do = {
					factor = 3.5
					modifier = {
						factor = 2.0
						check_variable = { treasury_rate > .50 }
					}
					modifier = { # High Interest Rate
						factor = 1.5
						check_variable = { interest_rate > 3.50 }
					}
					modifier = {
						factor = 1.75
						ai_has_major_economic_problems = yes
					}
					modifier = {
						factor = 1.5
						ai_has_moderate_economic_problems = yes
					}
					modifier = {
						factor = 1.25
						ai_has_minor_economic_problems = yes
					}
					modifier = {
						factor = 2.25
						ai_has_acceptable_surplus = yes
					}
					modifier = {
						factor = 1.25
						ai_has_acceptable_deficit = yes
					}
					modifier = {
						factor = 1.50
						ai_has_low_interest = yes
					}
					modifier = {
						factor = 1.15
						ai_has_low_treasury = yes
					}
					modifier = {
						factor = 150
						ai_has_high_treasury = yes
					}
					modifier = { #Try to focus on paying down debts if you have looming crisis
						factor = 1.4
						has_country_flag = AI_economic_downspiral
					}
					modifier = {
						factor = 0.80
						has_war = yes
					}
					# GDP Debt Ratio Methodology
					# Start being more likely to pay debt
					modifier = {
						factor = 1.10
						check_variable = { debt_ratio > 1.24 }
					}
					modifier = {
						factor = 1.15
						check_variable = { debt_ratio > 1.49 }
					}
					modifier = {
						factor = 1.65
						check_variable = { debt_ratio > 1.74 }
					}
					modifier = {
						factor = 2.25
						check_variable = { debt_ratio > 1.99 }
					}
					modifier = {
						factor = 2.5
						check_variable = { debt_ratio > 2.49 }
					}
					modifier = {
						factor = 2.75
						check_variable = { debt_ratio > 2.74 }
					}
					modifier = {
						factor = 3.50
						check_variable = { debt_ratio > 2.99 }
					}
					# Killswitches
					modifier = {
						factor = 0
						OR = {
							check_variable = { treasury < 0 }
							check_variable = { treasury_rate < 0 }
						}
					}
				}
			}
			debt_bg_control_right_click = { #Repay debt -- 10 debt
				ai_will_do = {
					factor = 5
					modifier = {
						factor = 0
						check_variable = { treasury_rate < 0 }
					}
					modifier = {
						factor = 2.0
						check_variable = { treasury_rate > 0.50 }
					}
					modifier = {
						factor = 1.5
						ai_has_high_interest = yes
					}
					modifier = {
						factor = 1.75
						ai_has_major_economic_problems = yes
					}
					modifier = {
						factor = 1.5
						ai_has_moderate_economic_problems = yes
					}
					modifier = {
						factor = 1.25
						ai_has_minor_economic_problems = yes
					}
					modifier = {
						factor = 2.0
						ai_has_acceptable_surplus = yes
					}
					modifier = {
						factor = 0.25
						ai_has_acceptable_deficit = yes
					}
					modifier = {
						factor = 0.50
						ai_has_low_interest = yes
					}
					modifier = {
						factor = 25
						ai_has_high_treasury = yes
					}
					modifier = {
						factor = 0.80
						has_war = yes
					}
					modifier = { #Puppets should be less caring about buying all debt
						factor = 0.75
						is_subject = yes
					}
					# GDP Debt Ratio Methodology
					# Start being more likely to pay debt
					modifier = {
						factor = 1.10
						check_variable = { debt_ratio > 1.24 }
					}
					modifier = {
						factor = 1.15
						check_variable = { debt_ratio > 1.49 }
					}
					modifier = {
						factor = 1.65
						check_variable = { debt_ratio > 1.74 }
					}
					modifier = {
						factor = 2.25
						check_variable = { debt_ratio > 1.99 }
					}
					modifier = {
						factor = 2.5
						check_variable = { debt_ratio > 2.49 }
					}
					modifier = {
						factor = 2.75
						check_variable = { debt_ratio > 2.74 }
					}
					modifier = {
						factor = 3.50
						check_variable = { debt_ratio > 2.99 }
					}
					# Killswitches
					modifier = {
						factor = 0
						check_variable = { treasury < 10 }
					}
				}
			}
			debt_bg_shift_right_click = { #should force the AI to repay 100 debt if they have the funds
				ai_will_do = {
					factor = 5
					modifier = {
						factor = 10
						check_variable = { treasury > 125 }
					}
					modifier = {
						factor = 0
						check_variable = { treasury_rate < 0 }
					}
					modifier = {
						factor = 2.0
						check_variable = { treasury_rate > 0.50 }
					}
					modifier = {
						factor = 1.5
						ai_has_high_interest = yes
					}
					modifier = {
						factor = 1.75
						ai_has_major_economic_problems = yes
					}
					modifier = {
						factor = 1.5
						ai_has_moderate_economic_problems = yes
					}
					modifier = {
						factor = 1.25
						ai_has_minor_economic_problems = yes
					}
					modifier = {
						factor = 2.0
						ai_has_acceptable_surplus = yes
					}
					modifier = {
						factor = 0.25
						ai_has_acceptable_deficit = yes
					}
					modifier = {
						factor = 0.50
						ai_has_low_interest = yes
					}
					modifier = {
						factor = 25
						ai_has_high_treasury = yes
					}
					modifier = {
						factor = 0.80
						has_war = yes
					}
					modifier = { #Puppets should be less caring about buying all debt
						factor = 0.75
						is_subject = yes
					}
					# GDP Debt Ratio Methodology
					# Start being more likely to pay debt
					modifier = {
						factor = 1.10
						check_variable = { debt_ratio > 1.24 }
					}
					modifier = {
						factor = 1.15
						check_variable = { debt_ratio > 1.49 }
					}
					modifier = {
						factor = 1.65
						check_variable = { debt_ratio > 1.74 }
					}
					modifier = {
						factor = 2.25
						check_variable = { debt_ratio > 1.99 }
					}
					modifier = {
						factor = 2.5
						check_variable = { debt_ratio > 2.49 }
					}
					modifier = {
						factor = 2.75
						check_variable = { debt_ratio > 2.74 }
					}
					modifier = {
						factor = 3.50
						check_variable = { debt_ratio > 2.99 }
					}
					# General Killswitches
					modifier = {
						factor = 0
						check_variable = { treasury < 100 }
					}
				}
			}
		}
	}
	# Treasury Topbar Container
	treasury = {
		context_type = player_context

		window_name = "treasury_container"

		visible = {
			ROOT = { NOT = { has_country_flag = hide_money } }
		}

		effects = {
			treasury_bg_click = {
				if = {
					limit = { NOT = { has_country_flag = open_economy_screen } }
					set_country_flag = open_economy_screen
				}
				else = {
					clr_country_flag = open_economy_screen
				}
			}
		}
	}
	# International Investments Topbar Container
	int_investments = {
		context_type = player_context

		window_name = "int_investments_container"

		visible = {
			ROOT = { NOT = { has_country_flag = hide_money } }
		}

		effects = {
			#Sell off investments
			int_investments_bg_right_click = {
				if = {
					limit = { check_variable = { int_investments > 1 } }
					subtract_from_variable = { int_investments = 1 }
					add_to_variable = { treasury = 0.60 }
					calculate_int_investments_rate = yes
				}
			}
			int_investments_bg_control_right_click = {
				if = {
					limit = { check_variable = { int_investments > 10 } }
					subtract_from_variable = { int_investments = 10 }
					add_to_variable = { treasury = 6.0 }
					calculate_int_investments_rate = yes
				}
			}
			int_investments_bg_shift_right_click = {
				if = {
					limit = { check_variable = { int_investments > 100 } }
					subtract_from_variable = { int_investments = 100 }
					add_to_variable = { treasury = 60 }
					calculate_int_investments_rate = yes
				}
			}
		}
	}

	### AC System ###
	AC_treasury = {
		context_type = selected_state_context

		window_name = "AC_treasury_container"

		parent_window_token = selected_state_view

		visible = {
			NOT = { is_owned_by = ROOT }
			ROOT = { NOT = { has_country_flag = AC_hide_investment_window } }
		}
	}

	AC_int_investments = {
		context_type = selected_state_context

		window_name = "AC_int_investments_container"

		parent_window_token = selected_state_view

		visible = {
			NOT = { is_owned_by = ROOT }
			ROOT = { NOT = { has_country_flag = AC_hide_investment_window } }
		}
	}
	### Diplomacy view other countries ###
	treasury_dip = {
		context_type = selected_country_context

		window_name = "diplo_treasury_container"
		parent_window_token = selected_country_view

		visible = {
			always = yes
		}
	}
	int_investments_dip = {
		context_type = selected_country_context

		window_name = "diplo_int_investments_container"
		parent_window_token = selected_country_view

		visible = {
			always = yes
		}
	}
	debt_dip = {
		context_type = selected_country_context

		window_name = "diplo_debt_container"
		parent_window_token = selected_country_view

		visible = {
			always = yes
		}
	}
	tax_rate_dip = {
		context_type = selected_country_context

		window_name = "tax_rate_diplo"
		parent_window_token = selected_country_view_diplomacy

		visible = {
			always = yes
		}
	}
	expense_gain_dip = {
		context_type = selected_country_context

		window_name = "expense_gain_diplo"
		parent_window_token = selected_country_view_diplomacy

		visible = {
			always = yes
		}
	}
	tax_gain_dip = {
		context_type = selected_country_context

		window_name = "tax_gain_diplo"
		parent_window_token = selected_country_view_diplomacy

		visible = {
			always = yes
		}
	}

	# Open Economy Buttons
	open_economy_construction_button = {
		context_type = player_context
		window_name = "construction_economy_open_button"
		parent_window_token = construction_tab

		effects = {
			open_economy_construction_button_click = {
				if = {
					limit = { NOT = { has_country_flag = open_economy_screen } }
					set_country_flag = open_economy_screen
				}
				else = {
					clr_country_flag = open_economy_screen
				}
			}
		}
	}
	open_economy_trade_button = {
		context_type = player_context
		window_name = "trade_economy_open_button"
		parent_window_token = trade_tab

		effects = {
			open_economy_trade_button_click = {
				if = {
					limit = { NOT = { has_country_flag = open_economy_screen } }
					set_country_flag = open_economy_screen
				}
				else = {
					clr_country_flag = open_economy_screen
				}
			}
		}
	}
	open_economy_political_button = {
		context_type = player_context
		window_name = "politics_economy_open_button"
		parent_window_token = politics_tab

		visible = { always = yes }
		triggers = {
			open_economy_political_button_click_enabled = {
				always = yes
			}
		}
		effects = {
			open_economy_political_button_click = {
				if = {
					limit = { NOT = { has_country_flag = open_economy_screen } }
					set_country_flag = open_economy_screen
				}
				else = {
					clr_country_flag = open_economy_screen
				}
			}
		}
	}
	# Economy/Budget Screen
	budget_tab = {
		context_type = player_context
		window_name = "budget_tab"

		visible = { ROOT = { has_country_flag = open_economy_screen } }

		triggers = {
			# Population taxes
			increase_population_tax_click_enabled = {
				check_variable = { var = population_tax_rate value = 0 compare = greater_than_or_equals }
				check_variable = { var = population_tax_rate value = 50 compare = less_than }
				NOT = { has_country_flag = no_personal_tax_rate_change }
				ROOT = { has_political_power > 50 }
			}
			increase_population_tax_shift_click_enabled = { #56-60 NO
				check_variable = { var = population_tax_rate value = 0 compare = greater_than_or_equals }
				check_variable = { var = population_tax_rate value = 45 compare = less_than_or_equals }
				NOT = { has_country_flag = no_personal_tax_rate_change }
				ROOT = { has_political_power > 250 }
			}
			decrease_population_tax_click_enabled = {
				check_variable = { var = population_tax_rate value = 0 compare = greater_than }
				check_variable = { var = population_tax_rate value = 50 compare = less_than_or_equals }
				NOT = { has_country_flag = no_personal_tax_rate_change }
				ROOT = { has_political_power > 50 }
			}
			decrease_population_tax_shift_click_enabled = { #0-5 NO
				check_variable = { var = population_tax_rate value = 5 compare = greater_than_or_equals }
				check_variable = { var = population_tax_rate value = 50 compare = less_than_or_equals }
				NOT = { has_country_flag = no_personal_tax_rate_change }
				ROOT = { has_political_power > 250 }
			}
			# Corporate Taxes
			increase_corporate_tax_click_enabled = {
				check_variable = { var = corporate_tax_rate value = 0 compare = greater_than_or_equals }
				check_variable = { var = corporate_tax_rate value = 50 compare = less_than }
				NOT = { has_country_flag = no_corporate_tax_rate_change }
				ROOT = { has_political_power > 50 }
			}
			increase_corporate_tax_shift_click_enabled = {
				check_variable = { var = corporate_tax_rate value = 0 compare = greater_than_or_equals }
				check_variable = { var = corporate_tax_rate value = 45 compare = less_than_or_equals }
				NOT = { has_country_flag = no_corporate_tax_rate_change }
				ROOT = { has_political_power > 250 }
			}
			decrease_corporate_tax_click_enabled = {
				check_variable = { var = corporate_tax_rate value = 0 compare = greater_than }
				check_variable = { var = corporate_tax_rate value = 50 compare = less_than_or_equals }
				NOT = { has_country_flag = no_corporate_tax_rate_change }
				ROOT = { has_political_power > 50 }
			}
			decrease_corporate_tax_shift_click_enabled = {
				check_variable = { var = corporate_tax_rate value = 5 compare = greater_than_or_equals }
				check_variable = { var = corporate_tax_rate value = 50 compare = less_than_or_equals }
				NOT = { has_country_flag = no_corporate_tax_rate_change }
				ROOT = { has_political_power > 250 }
			}
			# Extra Features
			print_money_button_click_enabled = {
				NOT = { has_country_flag = printed_money_recently }
				has_political_power > 99
			}
		}

		effects = {
			close_economy_screen_click = {
				clr_country_flag = open_economy_screen
			}
			# Population Tax Increase/Decrease
			increase_population_tax_click = {
				ROOT = { add_political_power = -50 }
				add_to_variable = { population_tax_rate = 1 }
				clamp_variable = {
					var = population_tax_rate
					min = 0
					max = 50
				}
				ingame_update_setup = yes
				set_variable = { law_attitude = 0 } #index for taxes in #_law_change_attitude arrays
				set_variable = { law_change = 1 } #-1 decrease, 1 for increase
				law_attitude_change = yes
				log = "[GetDateText]: [Root.GetName]: population_tax_rate decrease [?population_tax_rate]% (balance:[?treasury_rate])"
			}
			increase_population_tax_shift_click = {
				ROOT = { add_political_power = -250 }
				add_to_variable = { population_tax_rate = 5 }
				clamp_variable = {
					var = population_tax_rate
					min = 0
					max = 50
				}
				ingame_update_setup = yes
				set_variable = { law_attitude = 0 } #index for taxes in #_law_change_attitude arrays
				set_variable = { law_change = -1 } #-1 decrease, 1 for increase
				law_attitude_change = yes
				log = "[GetDateText]: [Root.GetName]: population_tax_rate decrease [?population_tax_rate]% (balance:[?treasury_rate])"
			}
			decrease_population_tax_click = {
				ROOT = { add_political_power = -50 }
				subtract_from_variable = { population_tax_rate = 1 }
				clamp_variable = {
					var = population_tax_rate
					min = 0
					max = 50
				}
				ingame_update_setup = yes
				set_variable = { law_attitude = 0 } #index for taxes in #_law_change_attitude arrays
				set_variable = { law_change = -1 } #-1 decrease, 1 for increase
				law_attitude_change = yes
				log = "[GetDateText]: [Root.GetName]: population_tax_rate decrease [?population_tax_rate]% (balance:[?treasury_rate])"
			}
			decrease_population_tax_shift_click = {
				ROOT = { add_political_power = -250 }
				subtract_from_variable = { population_tax_rate = 5 }
				clamp_variable = {
					var = population_tax_rate
					min = 0
					max = 50
				}
				ingame_update_setup = yes
				set_variable = { law_attitude = 0 } #index for taxes in #_law_change_attitude arrays
				set_variable = { law_change = -1 } #-1 decrease, 1 for increase
				law_attitude_change = yes
				log = "[GetDateText]: [Root.GetName]: population_tax_rate decrease [?population_tax_rate]% (balance:[?treasury_rate])"
			}
			##Corporate Tax Increase/Decrease
			increase_corporate_tax_click = {
				ROOT = { add_political_power = -50 }
				add_to_variable = { corporate_tax_rate = 1 }
				clamp_variable = {
					var = corporate_tax_rate
					min = 0
					max = 50
				}
				ingame_update_setup = yes
				set_variable = { law_attitude = 0 } #index for taxes in #_law_change_attitude arrays
				set_variable = { law_change = -1 } #-1 decrease, 1 for increase
				law_attitude_change = yes
				log = "[GetDateText]: [Root.GetName]: corporate_tax_rate decrease [?corporate_tax_rate]% (balance:[?treasury_rate])"
			}
			increase_corporate_tax_shift_click = {
				ROOT = { add_political_power = -250 }
				add_to_variable = { corporate_tax_rate = 5 }
				clamp_variable = {
					var = corporate_tax_rate
					min = 0
					max = 50
				}
				ingame_update_setup = yes
				set_variable = { law_attitude = 0 } #index for taxes in #_law_change_attitude arrays
				set_variable = { law_change = -1 } #-1 decrease, 1 for increase
				law_attitude_change = yes
				log = "[GetDateText]: [Root.GetName]: corporate_tax_rate decrease [?corporate_tax_rate]% (balance:[?treasury_rate])"
			}
			decrease_corporate_tax_click = {
				ROOT = { add_political_power = -50 }
				subtract_from_variable = { corporate_tax_rate = 1 }
				clamp_variable = {
					var = corporate_tax_rate
					min = 0
					max = 50
				}
				ingame_update_setup = yes
				set_variable = { law_attitude = 0 } #index for taxes in #_law_change_attitude arrays
				set_variable = { law_change = -1 } #-1 decrease, 1 for increase
				law_attitude_change = yes
				log = "[GetDateText]: [Root.GetName]: corporate_tax_rate decrease [?corporate_tax_rate]% (balance:[?treasury_rate])"
			}
			decrease_corporate_tax_shift_click = {
				ROOT = { add_political_power = -250 }
				subtract_from_variable = { corporate_tax_rate = 5 }
				clamp_variable = {
					var = corporate_tax_rate
					min = 0
					max = 50
				}
				ingame_update_setup = yes
				set_variable = { law_attitude = 0 } #index for taxes in #_law_change_attitude arrays
				set_variable = { law_change = -1 } #-1 decrease, 1 for increase
				law_attitude_change = yes
				log = "[GetDateText]: [Root.GetName]: corporate_tax_rate decrease [?corporate_tax_rate]% (balance:[?treasury_rate])"
			}
			#
			refresh_tax_rates_bg_click = {
				log = "Triggered Tax Rate Refresh"
				ingame_update_setup = yes
			}
			# - Printing Money action
			# This action prints the money and immediately adds the value of the printing exchange to treasury and debt.
			print_money_button_click = {
				set_temp_variable = { var = printing value = display_income }
				multiply_temp_variable = { var = printing value = 2 }
				add_to_variable = { var = treasury value = printing }
				add_to_variable =  { var = debt value = printing }
				add_political_power = -100
				set_country_flag = { flag = printed_money_recently value = 1 days = 45 }
			}
		}

		# AI Section
		# Note: 5 days - 120 Hrs
		# Functional Notes:
		# ai_enabled - triggers that engage the AI for this GUI
		# ai_test_interval - timeframe between AI checks
		# ai_check - trigger the AI looks for to determine if it needs to look at a button
		# ai_weights - modifiers to determine AI habits

		ai_enabled = { always = yes }
		ai_test_interval = 72
		ai_max_weight_taken_per_test = 2
		ai_check = {
			has_political_power > 50
		}

		ai_weights = {
			# Population Tax Rate Clicks
			increase_population_tax_click = {
				ai_will_do = {
					factor = 1
					# General Economic Factors
					modifier = {
						factor = 1.25
						ai_has_deficit = yes
					}
					modifier = {
						factor = 2.0
						ai_has_high_deficit = yes
					}
					modifier = {
						factor = 0.70
						AI_has_high_population_taxes = yes
					}
					modifier = {
						factor = 1.10
						AI_has_moderate_population_taxes = yes
					}
					modifier = {
						factor = 1.50
						ai_has_low_population_taxes = yes
					}
					modifier = {
						factor = 1.10
						OR = {
							has_idea = depression
							has_idea = recession
						}
					}
					modifier = {
						factor = 0.60
						OR = {
							has_idea = stagnation
							has_idea = stable_growth
							has_idea = fast_growth
						}
					}
					modifier = {
						factor = 1.25
						has_idea = economic_boom
					}
					# Political Power
					modifier = {
						factor = 1.25
						has_political_power > 49
					}
					modifier = {
						factor = 1.50
						has_political_power > 99
					}
					modifier = {
						factor = 2.0
						has_political_power > 149
					}
					# Reducers
					modifier = {
						factor = 0.85
						OR = {
							ai_has_acceptable_deficit = yes
							ai_has_acceptable_deficit_factories = yes
						}
					}
					modifier = {
						factor = 0.15
						OR = {
							ai_has_acceptable_surplus = yes
							ai_has_acceptable_surplus_factories = yes
						}
					}
					modifier = {
						factor = 0.75
						has_stability < 0.25
					}
					modifier = {
						factor = 0.70
						has_stability < 0.20
					}
					modifier = {
						factor = 0.60
						has_stability < 0.15
					}
					modifier = {
						factor = 0.50
						has_stability < 0.10
					}
					# General Command to be less likely to increase income tax
					modifier = {
						factor = 0.95
						is_ai = yes
					}
					# Killswitch
					modifier = {
						factor = 0
						OR = {
							has_country_flag = no_personal_tax_rate_change
							check_variable = { population_tax_rate > 49 }
							has_stability < 0.05 # AI should avoid lowering taxes if they have no stability obviously
						}
					}
				}
			}
			decrease_population_tax_click = {
				ai_will_do = {
					factor = 1
					# Generic
					modifier = {
						factor = 1.25
						ai_has_surplus = yes
					}
					modifier = {
						factor = 1.25
						ai_has_high_surplus = yes
					}
					modifier = {
						factor = 0.70
						ai_has_low_population_taxes = yes
					}
					modifier = {
						factor = 1.10
						AI_has_moderate_population_taxes = yes
					}
					modifier = {
						factor = 1.50
						AI_has_high_population_taxes = yes
					}
					modifier = {
						factor = 0.60
						OR = {
							has_idea = depression
							has_idea = recession
						}
					}
					modifier = {
						factor = 1.10
						OR = {
							has_idea = stagnation
							has_idea = stable_growth
							has_idea = fast_growth
						}
					}
					modifier = {
						factor = 1.15
						has_idea = economic_boom
					}
					# Political Power
					modifier = {
						factor = 1.25
						has_political_power > 49
					}
					modifier = {
						factor = 1.50
						has_political_power > 99
					}
					modifier = {
						factor = 2.0
						has_political_power > 149
					}
					# Reducers
					modifier = {
						factor = 0.65
						OR = {
							ai_has_acceptable_deficit = yes
							ai_has_acceptable_deficit_factories = yes
						}
					}
					modifier = {
						factor = 0.85
						OR = {
							ai_has_acceptable_deficit = yes
							ai_has_acceptable_deficit_factories = yes
						}
					}
					modifier = {
						factor = 0.15
						OR = {
							ai_has_acceptable_surplus = yes
							ai_has_acceptable_surplus_factories = yes
						}
					}
					# Stability Increase Needed
					modifier = {
						factor = 1.50
						has_stability < 0.10
					}
					modifier = {
						factor = 1.25
						has_stability < 0.15
					}
					modifier = {
						factor = 1.15
						has_stability < 0.20
					}
					modifier = {
						factor = 1.10
						has_stability < 0.25
					}
					# Killswitch
					modifier = {
						factor = 0
						OR = {
							check_variable = { population_tax_rate > 0 }
							has_country_flag = no_personal_tax_rate_change
						}
					}
				}
			}
			# Corporate Tax Rate Clicks
			increase_corporate_tax_click = {
				ai_will_do = {
					factor = 1
					# Generic Economic
					modifier = {
						factor = 1.50
						ai_has_deficit = yes
					}
					modifier = {
						factor = 1.75
						ai_has_high_deficit = yes
					}
					modifier = {
						factor = 1.15
						ai_has_surplus = yes
					}
					modifier = {
						factor = 0.65
						ai_has_high_corporate_taxes = yes
					}
					modifier = {
						factor = 1.15
						ai_has_medium_corporate_taxes = yes
					}
					modifier = {
						factor = 1.50
						ai_has_low_corporate_taxes = yes
					}
					modifier = {
						factor =  1.15
						OR = {
							has_idea = depression
							has_idea = recession
							has_idea = stagnation
						}
					}
					modifier = {
						factor = 1.50
						OR = {
							has_idea = fast_growth
							has_idea = stable_growth
							has_idea = economic_boom
						}
					}
					# Political Power
					modifier = {
						factor = 1.25
						has_political_power > 49
					}
					modifier = {
						factor = 1.50
						has_political_power > 99
					}
					modifier = {
						factor = 2.0
						has_political_power > 149
					}
					# Reducers
					modifier = {
						factor = 0.95
						OR = {
							ai_has_acceptable_deficit = yes
							ai_has_acceptable_deficit_factories = yes
						}
					}
					modifier = {
						factor = 0.30
						OR = {
							ai_has_acceptable_surplus = yes
							ai_has_acceptable_surplus_factories = yes
						}
					}
					# AI should focus on consumer goods
					modifier = {
						factor = 1.25
						is_ai = yes
					}
					# Killswitch
					modifier = {
						factor = 0
						OR = {
							check_variable = { corporate_tax_rate > 49 }
							has_country_flag = no_corporate_tax_rate_change
						}
					}
				}
			}
			decrease_corporate_tax_click = {
				ai_will_do = {
					factor = 1
					# Generic Economic
					modifier = {
						factor = 0.75
						ai_has_deficit = yes
					}
					modifier = {
						factor = 0.15
						ai_has_high_deficit = yes
					}
					modifier = {
						factor = 1.15
						ai_has_surplus = yes
					}
					modifier = {
						factor = 1.25
						ai_has_high_surplus = yes
					}
					modifier = {
						factor = 1.35
						ai_has_high_corporate_taxes = yes
					}
					modifier = {
						factor = 1.15
						ai_has_medium_corporate_taxes = yes
					}
					modifier = {
						factor = 0.50
						ai_has_low_corporate_taxes = yes
					}
					modifier = {
						factor = 0.80
						OR = {
							has_idea = depression
							has_idea = recession
							has_idea = stagnation
						}
					}
					modifier = {
						factor = 0.75
						OR = {
							has_idea = fast_growth
							has_idea = stable_growth
							has_idea = economic_boom
						}
					}
					# Political Power
					modifier = {
						factor = 1.25
						has_political_power > 49
					}
					modifier = {
						factor = 1.50
						has_political_power > 99
					}
					modifier = {
						factor = 2.0
						has_political_power > 149
					}
					# Reducers
					modifier = {
						factor = 0.95
						OR = {
							ai_has_acceptable_deficit = yes
							ai_has_acceptable_deficit_factories = yes
						}
					}
					modifier = {
						factor = 0.30
						OR = {
							ai_has_acceptable_surplus = yes
							ai_has_acceptable_surplus_factories = yes
						}
					}
					# AI should focus on consumer goods
					modifier = {
						factor = 1.25
						is_ai = yes
					}
					# Killswitch
					modifier = {
						factor = 0
						OR = {
							check_variable = { corporate_tax_rate > 0 }
							has_country_flag = no_corporate_tax_rate_change
						}
					}
				}
			}
		}
	}
}